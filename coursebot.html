<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>CourseBot</title>
    <style>
        /* CSS for styling */
        .header {
            color: black; /* Change header color to black */
        }
    
        .body {
            color: grey; /* Change body color to grey */
        }
        input[type="search"] {
        width: 350px; /* Adjust the width of the search input */
        height: 100%;
    }
    </style>
</head>
<body style="background-color: black;" align="center">
    <script src="coursebot.js"></script>
    <br>
    <br>
    <br>
    <br>
    <br>
    <table align="center">
        <tr><td align="center"><img src="ai logo.png" style="width:80px;height: 90px;"></td><td align="center"><h2 style="font-family: Helvetica; color:white;">Welcome to CourseBot</h2></td></tr>
    </table>
    <table align="center">
        <tr><p style="font-family: Helvetica; color:white; font-weight: bold;"> Answer these questions to get your computer science course suggestions</p></tr>
        <br>
        <tr>
            <div class="question" id="question1"><form action="">
            <p style="font-family: Helvetica; color: rgb(250,250,0);">Are you completing a B.S. or B.A:</p>
            <label for="query"style="font-family: Helvetica; color: white">B.A.</label>
            <input type="radio" id="query" name="query">
            <label for="query"style="font-family: Helvetica; color: white">    B.S.</label>
            <input type="radio" id="query" name="query">
            <button type="button" onclick="showNextQuestion(1)">Next</button>
            </form></div>

            <div class="question" id="question2" style="display:none;">
            <p style="font-family: Helvetica; color: rgb(250,250,0);">What fields are you interested in? (Select all that apply)</p>
            <input type="checkbox" id="frontDev" value="frontDev">
            <label for="frontDev"style="font-family: Helvetica; color: white">Front-End Development</label>
            <br>
            <input type="checkbox" id="backDev" value="backDev">
            <label for="backDev"style="font-family: Helvetica; color: white">Back-End Development</label>
            <br>
            <input type="checkbox" id="fullStack" value="fullStack">
            <label for="fullStack"style="font-family: Helvetica; color: white">Full Stack Development</label>
            <br>
            <input type="checkbox" id="mobDev" value="mobDev">
            <label for="mobDev"style="font-family: Helvetica; color: white">Mobile Development</label>
            <br>
            <input type="checkbox" id="gameDev" value="gameDev">
            <label for="gameDev"style="font-family: Helvetica; color: white">Game Development</label>
            <br>
            <input type="checkbox" id="dataSci" value="dataSci">
            <label for="dataSci"style="font-family: Helvetica; color: white">Data Science</label>
            <br>
            <input type="checkbox" id="cyberSec" value="cyberSec">
            <label for="cyberSec"style="font-family: Helvetica; color: white">Cybersecurity</label>
            <br>
            <input type="checkbox" id="netManag" value="netManag">
            <label for="netManag"style="font-family: Helvetica; color: white">Network Managment</label>
            <br>
            <input type="checkbox" id="qualAssure" value="qualAssure">
            <label for="qualAssure"style="font-family: Helvetica; color: white">Quality Assurance</label>
            <br>
            <input type="checkbox" id="cloud" value="cloud">
            <label for="cloud"style="font-family: Helvetica; color: white">Infastructure and Cloud Services</label>
            <br>
            <input type="checkbox" id="consult" value="consult">
            <label for="consult"style="font-family: Helvetica; color: white">Consultancy and Strategy</label>
            <br>
            <input type="checkbox" id="dataAdmin" value="dataAdmin">
            <label for="dataAdmin"style="font-family: Helvetica; color: white">Data Administration and Development</label>
            <br>
            <input type="checkbox" id="imbedSys" value="imbedSys">
            <label for="imbedSys"style="font-family: Helvetica; color: white">Imbedded Systems and Hardware</label>
            <br>
            <input type="checkbox" id="research" value="research">
            <label for="research"style="font-family: Helvetica; color: white">Research and Development</label>
            <br>
            <input type="checkbox" id="ux" value="ux">
            <label for="ux"style="font-family: Helvetica; color: white">User Experience and Design</label>
            <button type="button" onclick="showNextQuestion(2)">Next</button>
            </div>
            <br>
            <br>
          
          <tr>
            <br>
            <br>
            
            <div class="search-wrapper">
                <label for="search">Search Class Code</label>
                <input type="search" id="search" placeholder="Search Class" data-search>
            </div>
            <div class="user-cards">
            
            
                <button class="card">
                    <div class="header">01:198:111</div>
                    <input type="checkbox" id="mobDev" value="mobDev">
                    <div class="body">Introduction to Computer Science</div>
                </button>
            
                <button class="card">
                    <div class="header">02:198:111</div>
                    <input type="checkbox" id="mobDev" value="mobDev">
                    <div class="body">Introduction to Computer Science</div>
                </button>

                <button class="card">
                    <div class="header">03:198:111</div>
                    <input type="checkbox" id="mobDev" value="mobDev">
                    <div class="body">Introduction to Computer Science</div>
                </button>

                <button class="card">
                    <div class="header">04:198:111</div>
                    <input type="checkbox" id="mobDev" value="mobDev">
                    <div class="body">Introduction to Computer Science</div>
                </button>

                <button class="card">
                    <div class="header">05:198:111</div>
                    <input type="checkbox" id="mobDev" value="mobDev">
                    <div class="body">Introduction to Computer Science</div>
                </button>
            </div>
            <br><script>
                window.addEventListener('DOMContentLoaded', (event) => {
                    // Get the search input element and all card elements
                    const searchInput = document.getElementById('search');
                    const cards = document.querySelectorAll('.card');
                
                    // Function to filter cards based on search input
                    function filterCards() {
                        const searchText = searchInput.value.toLowerCase();
                
                        // Loop through each card
                        cards.forEach(card => {
                            const headerText = card.querySelector('.header').textContent.toLowerCase();
                            const bodyText = card.querySelector('.body').textContent.toLowerCase();
                
                            // Check if the card's header or body includes the search text
                            if (headerText.includes(searchText) || bodyText.includes(searchText)) {
                                card.style.display = ''; // Show the card
                            } else {
                                card.style.display = 'none'; // Hide the card
                            }
                        });
                    }
                
                    // Add an event listener to the search input
                    searchInput.addEventListener('input', filterCards);
                });
                </script>
            

            <br>
            <div class="question">
                <input type="text" id="course1" readonly>
              </div>
            <script>
            const fs = require('fs');
            const searchInput = document.querySelector("[data-search]")
                        
            searchInput.addEventListener("input", e =>{
                const value = e.target.value
                console.log(value)
            })
            
            //converts csv to 2d array
            function csvTo2DArray(filePath) {
                try {
                    // Read the file content
                    const content = fs.readFileSync(filePath, { encoding: 'utf-8' });
                
                    // Split the content by new lines to get rows, then split each row by comma
                    const rows = content.split('\n').map(row => row.split(','));
                
                    return rows;
                } catch (error) {
                    console.error("Error reading the file:", error);
                    return [];
                }
            }
            var courses = csvTo2DArray('courses.csv');
            
            //fields variables and array implementation
            var frontEnd = document.getElementById('frontDev').value;
            var backEnd = document.getElementById('backDev').value;
            var fullStack = document.getElementById('fullStack').value;
            var mobileDev = document.getElementById('mobDev').value;
            var gameDev = document.getElementById('gameDev').value;
            var dataSci = document.getElementById('dataSci').value;
            var cyberSecurity = document.getElementById('cyberSec').value;
            var netManage = document.getElementById('netManag').value;
            var qAssure = document.getElementById('qualAssure').value;
            var cloud = document.getElementById('cloud').value;
            var consult = document.getElementById('consult').value;
            var dataAdmin = document.getElementById('dataAdmin').value;
            var imbedSys = document.getElementById('imbedSys').value;
            var research = document.getElementById('research').value;
            var ux = document.getElementById('ux').value;
            
            const fields = [frontEnd,backEnd,fullStack,mobileDev,gameDev,dataSci,cyberSecurity,netManage,qAssure,cloud,consult,dataAdmin,imbedSys,research,ux]
            
            for (let i=0;i<fields.length-1;i++){
                if(fields[i]!=null){
                    fields[i] = true;
                }
                else{
                    fields[i] = false;
                }
            }
            
            
            removeTakenCourses(courses, takenCourses);
            
            let takenCourses = ["mychals stuff somehow gets converted into here"];
            
            function removeTakenCourses(courses, takenCourses) {
            
                courses.splice(0, 1); // This removes the first element of the courses array
            
                // Loop through the courses array from the end to the beginning
                for (let i = courses.length - 1; i > 0; i--) {
                    // Check if the current course's identifier matches any in the takenCourses array
                    if (takenCourses.includes(courses[i][1])) {
                        // Remove the course from the courses array if there's a match
                        courses.splice(i, 1);   
                    }
                }
            }
            
            
            //comparing arrays to get courses list
            var arr = [];
            for(let i=0;i<courses.length-1;i++){
                var counter = 0;
                for(let j=1;j<16;j++){
                    if(courses[i][j]==fields[j-1]){
                        counter++;
                    }
                }
                if(counter>=6){
                    arr.push(courses[i]);
                }
            }
            
            first = document.getElementById("course1");
            first.value = "3";
            </script>          
            
          </div>  


          <script>
            function showNextQuestion(questionNumber) {
                var currentQuestion = document.getElementById('question' + questionNumber);
                var nextQuestion = document.getElementById('question' + (questionNumber + 1));
                if (currentQuestion) currentQuestion.style.display = 'none';
                if (nextQuestion) {
                    nextQuestion.style.display = 'block';
                } else {
                    document.getElementById('finalStep').style.display = 'block';
                }
            }
            
            function submitQuiz() {
                alert("Quiz submitted!");
                // Further logic for quiz submission can be added here
            }
            </script>
          
</body>
</html>